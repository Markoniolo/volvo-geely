{"version":3,"sources":["scripts/contacts.js"],"names":["contacts","document","querySelector","contactsBoxes","querySelectorAll","mapItemArray","contactsMapInit","i","length","addEventListener","toggleMap","loadMap","mapScript","createElement","src","body","appendChild","ymaps","ready","initAllMaps","maps","initMap","classList","contains","oldActive","remove","add","oldActiveBox","index","getAttribute","map","centerMap","contactMapInit","myMap","zoom","Map","center","JSON","parse","MyIconContentLayout","templateLayoutFactory","createClass","createPlacemark","setMapCenter","item","coords","caption","placemark","Placemark","iconCaption","iconContent","iconLayout","iconImageHref","iconImageSize","window","innerWidth","iconImageOffset","iconContentLayout","geoObjects","centerCoords","setCenter"],"mappings":"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","sourcesContent":["const contacts = document.querySelector('[data-element=\"contacts\"]')\nconst contactsBoxes = document.querySelectorAll('[data-element=\"contacts__box\"]')\nlet mapItemArray\n\nif (contacts) contactsMapInit()\n\nfunction contactsMapInit() {\n    mapItemArray = contacts.querySelectorAll('[data-element=\"contacts__item\"]')\n    for (let i = 0; i < mapItemArray.length; i++) {\n        mapItemArray[i].addEventListener('click', toggleMap)\n    }\n    loadMap()\n}\n\nfunction loadMap() {\n    const mapScript = document.createElement('script')\n\n    mapScript.src = 'https://api-maps.yandex.ru/2.1/?lang=ru_RU'\n    document.body.appendChild(mapScript)\n\n    mapScript.addEventListener('load', function () {\n        ymaps.ready(initAllMaps)\n    })\n}\n\nfunction initAllMaps () {\n    const maps = contacts.querySelectorAll('.contacts__map')\n    for (let i = 0; i < maps.length; i++) {\n        initMap(maps[i], i)\n    }\n}\n\nfunction toggleMap () {\n    if (this.classList.contains('contacts__item_active')) return\n    const oldActive = contacts.querySelector('.contacts__item_active')\n    if (oldActive) oldActive.classList.remove('contacts__item_active')\n    this.classList.add('contacts__item_active')\n    const oldActiveBox = contacts.querySelector('.contacts__box_active')\n    if (oldActiveBox) oldActiveBox.classList.remove('contacts__box_active')\n    const index = this.getAttribute('data-index')\n    contactsBoxes[index].classList.add('contacts__box_active')\n}\n\nfunction initMap(map, index) {\n    const centerMap = map.getAttribute('data-coords-center')\n    contactMapInit()\n\n    function contactMapInit() {\n        let myMap\n        const zoom = 13\n        myMap = new ymaps.Map(`contacts__map-${index+1}`, {\n            center: JSON.parse(centerMap),\n            zoom: zoom\n        })\n\n        const MyIconContentLayout = ymaps.templateLayoutFactory.createClass(\n            '<div class=\"placemark-caption\">$[properties.iconContent]</div>'\n        )\n\n        createPlacemark(mapItemArray[index])\n        mapItemArray[index].addEventListener(\"click\", setMapCenter)\n\n        function createPlacemark(item) {\n            const coords = JSON.parse(item.getAttribute('data-coords'))\n            const caption = item.getAttribute('data-map-caption')\n            const placemark = new ymaps.Placemark(coords, {\n                iconCaption: caption,\n                iconContent: caption\n            }, {\n                iconLayout: 'default#imageWithContent',\n                iconImageHref: 'assets/img/placemark.svg',\n                iconImageSize: window.innerWidth > 1280 ? [34, 46] : [27, 37],\n                iconImageOffset: window.innerWidth > 1280 ? [-17, -23] : [-23, -18],\n                iconContentLayout: MyIconContentLayout\n            })\n            myMap.geoObjects.add(placemark)\n        }\n\n        function setMapCenter() {\n            const centerCoords = JSON.parse(this.getAttribute(\"data-coords\"))\n            myMap.setCenter(centerCoords)\n        }\n    }\n}\n"],"file":"contacts.js"}